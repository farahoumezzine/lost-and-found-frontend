<div class="register-container">
  <div class="register-box">
    <div class="register-header">
      <h2>Create an account</h2>
    </div>
    
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-group" [class.error]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
        <label for="username">Username</label>
        <input 
          type="text" 
          id="username" 
          formControlName="username"
          placeholder="Enter your username">
        <div class="error-container" *ngIf="registerForm.get('username')?.touched">
          <small class="error-message" *ngIf="registerForm.get('username')?.errors?.['required']">
            <i class="fas fa-exclamation-circle"></i>
            Username is required
          </small>
          <small class="error-message" *ngIf="registerForm.get('username')?.errors?.['minlength']">
            <i class="fas fa-exclamation-circle"></i>
            Username must be at least 3 characters long
          </small>
        </div>
      </div>

      <div class="form-group" [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        <label for="email">E-mail</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          placeholder="example@email.com">
        <div class="error-container" *ngIf="registerForm.get('email')?.touched">
          <small class="error-message" *ngIf="registerForm.get('email')?.errors?.['email']">
            <i class="fas fa-exclamation-circle"></i>
            Invalid email format
          </small>
        </div>
      </div>

      <div class="form-group" [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        <label for="password">Password</label>
        <div class="password-input">
          <input 
            [type]="showPassword ? 'text' : 'password'"
            id="password" 
            formControlName="password"
            placeholder="Minimum 6 characters">
        </div>
        <div class="error-container" *ngIf="registerForm.get('password')?.touched">
          <small class="error-message" *ngIf="registerForm.get('password')?.errors?.['minlength']">
            <i class="fas fa-exclamation-circle"></i>
            Password must contain at least 6 characters
          </small>
        </div>
      </div>

      <div class="form-group" [class.error]="registerForm.get('role')?.invalid && registerForm.get('role')?.touched">
        <label for="role">Role</label>
        <select 
          id="role" 
          formControlName="role"
          class="role-select">
          <option value="">Select a role</option>
          <option value="user">User</option>
          <option value="admin">Admin</option>
        </select>
      </div>

      <div class="global-error" *ngIf="errorMessage">
        <i class="fas fa-exclamation-triangle"></i>
        {{ errorMessage }}
      </div>

      <button type="submit" [disabled]="registerForm.invalid || loading">
        <span *ngIf="!loading">Sign up</span>
        <div class="loading-spinner" *ngIf="loading"></div>
      </button>

      <div class="links">
        <p>Already registered? <a routerLink="/login">Sign in here</a></p>
      </div>
    </form>
  </div>
</div>