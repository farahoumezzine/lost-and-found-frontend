<div class="login-container">
  <div class="login-box">
    <h2 style="text-align: center;">Connection</h2>
    
    <form #f="ngForm" (ngSubmit)="onSubmit(f)">
      <!-- Email -->
      <div class="form-group" [class.error]="(email.invalid && email.touched) || (errorType === 'email' && showError)">
        <label for="email">E-mail</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          required
          email
          placeholder="Enter your email" 
          ngModel 
          #email="ngModel">
        <div class="error-message">
          <span *ngIf="email.invalid && email.touched && email.errors?.['required']">Email is required</span>
          <span *ngIf="email.invalid && email.touched && email.errors?.['email']">Invalid email format</span>
          <span *ngIf="errorType === 'email' && showError">{{ errorMessage }}</span>
        </div>
      </div>

      <!-- Password -->
      <div class="form-group" [class.error]="(password.invalid && password.touched) || (errorType === 'password' && showError)">
        <label for="password">Password</label>
        <input 
          type="password" 
          id="password" 
          name="password" 
          required
          minlength="6"
          placeholder="Enter your password" 
          ngModel 
          #password="ngModel">
        <div class="error-message">
          <span *ngIf="password.invalid && password.touched && password.errors?.['required']">Password is required</span>
          <span *ngIf="password.invalid && password.touched && password.errors?.['minlength']">Password must contain at least 6 characters</span>
          <span *ngIf="errorType === 'password' && showError">{{ errorMessage }}</span>
        </div>
      </div>

      <!-- General error message -->
      <div class="global-error" *ngIf="errorType === 'general' && showError">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage }}
      </div>

      <!-- Login button -->
      <button type="submit" [disabled]="f.invalid || loading">
        <span *ngIf="!loading">Sign In</span>
        <div class="loading-spinner" *ngIf="loading"></div>
      </button>

      <!-- Links -->
      <div class="links">
        <a routerLink="/forgot-password">Forgotten password ?</a>
        <p>No account yet ? <a routerLink="/register">Create an account</a></p>
      </div>
    </form>
  </div>
</div>